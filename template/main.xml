<ActorFrame
	InitCommand = "%function(self)
		self:removecommand('Init')

		-- Needed by StepMania, in order to not kill lua mods early
		self:sleep(9e9)

		-- `xero` is the only global variable written by this template
		-- Everything, including the modder's variables are stored in it
		xero = {
			MIRIN_VERSION = 'git-d04ee2c',
			foreground = self,
			dir = GAMESTATE:GetCurrentSong():GetSongDir(),
		}

		-- prepare xero
		setmetatable(xero, {
			__index = _G,
			__call = function(self, f) setfenv(f or 2, self); return f; end
		})

		-- prepare xero.require
		assert(loadfile(xero.dir..'template/require.lua'))()
	end"
>
	<children>

		<!-- Load the template onto an actor -->
		<Layer InitCommand = "%xero.require('template.commands').init"/>

		<!-- Template plugins -->
		<Layer File = "plugins.xml" />

		<!-- Load the User's actors -->
		<Layer File = "@'../'..xero.require('template.options').xml_entry_path" />

	</children>
</ActorFrame>
